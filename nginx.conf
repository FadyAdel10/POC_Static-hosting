server {
    listen 80;
    server_name *.CloudAstro.com;  # Make sure this matches the case correctly

    location / {
        # Extract the project and user from the subdomain
        set $project "";
        set $user "";

        # Extract project name from the first part of the subdomain
        if ($host ~* ^([^.]+)\.(.+?)\.cloudastro\.com$) {
            set $project $1;  # Extract the project name (e.g., project1)
            set $user $2;     # Extract the user name (e.g., user1)
        }

        # Serve static files from the corresponding project directory
        alias /home/fady/projects/$user/$project/;
        index index.html index.htm;

        # Handle 404 for non-existent files
        try_files $uri $uri/ =404; 
    }
}
